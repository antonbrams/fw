{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a2698d5980b04880d1d7","webpack:///./src/index.js","webpack:///./src/Layer.js","webpack:///./src/Screen.js","webpack:///./src/Scroller.js","webpack:///./src/animation.js","webpack:///./src/array.js","webpack:///./src/color.js","webpack:///./src/css.js","webpack:///./src/dom.js","webpack:///./src/etc.js","webpack:///./src/event.js","webpack:///./src/geometry.js","webpack:///./src/gesture.js","webpack:///./src/math.js","webpack:///./src/matrix.js","webpack:///./src/model.js","webpack:///./src/text.js","webpack:///./src/value.js","webpack:///./src/vector.js","webpack:///./src/style.sass?6249","webpack:///./src/style.sass","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js"],"names":["default","Layer","options","identifier","Date","getTime","event","Machine","data","_dom","_props","transformation","origin","translate","scale","fill","rotate","matrix3d","pop","templateUpdater","transformationTouchEventLink","exists","dom","create","parent","isObj","set","isDom","isStr","parentNode","topic","fn","on","support","listener","key","value","isFn","_setAttribute","style","_setCss","option","emit","setAttribute","removeAttribute","computed","model","params","modelKey","to","initValue","curValue","from","Object","defineProperty","param","get","removeChild","pos","left","top","size","width","height","offset","vpo","position","offsetWidth","offsetHeight","unit","document","body","appendChild","x","y","next","end","flow","time","ease","delay","clone","cloneNode","layer","a","b","boxCollision","vecdim","query","children","querySelector","querySelectorAll","out","i","length","push","append","el","isArr","forEach","prepend","classList","toggle","contains","add","item","remove","bg","image","backgroundImage","backgroundOrigin","backgroundPosition","backgroundSize","backgroundRepeat","repeat","backgroundColor","color","props","variant","weight","family","align","lineHeight","shadow","side","radius","l","t","r","tl","tr","bl","br","old","match","fromString","addClass","replaceWith","string","innerHTML","template","bind","html","off","offsetLeft","offsetTop","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","margin","marginLeft","marginTop","marginRight","marginBottom","axis","applyTransformation","isNum","z","matrix","rect","center","Screen","window","innerWidth","innerHeight","Scroller","animate","name","keyframes","styleSheets","insertRule","vendor","animation","e","animationName","removeRule","removeEventListener","addEventListener","draw","thread","jobs","requestAnimationFrame","bang","transition","setTimeout","fps","active","id","job","running","loop","setInterval","keys","clearTimeout","getSinus","speed","sin","Math","map","decay","callback","performance","now","stop","types","vec","calculate","c","sub","isEqual","len","num","type","stopped","_splitQuery","levels","split","level","last","_level","object","path","n","array","list","find","output","slice","temp","delete","deleted","splice","indexOf","found","updateColumn","index","console","log","filterMap","original","hsva","hue","saturation","alpha","trn","rand","_alpha","rgb","parseInt","random","element","p","transformOrigin","perspectiveOrigin","transform","toString","prop","parseFloat","defaultView","getComputedStyle","getPropertyValue","prefix","div","createElement","capitalize","classes","replace","tagAndId","shift","tmp","init","render","result","$1","$2","val","firstChild","child","insertBefore","selection","mode","ondragstart","onselectstart","methods","assign","uuid","floor","substring","uploadFile","input","onready","onchange","files","target","readFile","file","compressImage","onload","quality","compressor","url","canvas","context","getContext","drawImage","toDataURL","src","scaled","urls","cookie","cookies","bundle","del","search","address","timeout","duration","interval","check","execute","count","success","clearInterval","namespace","debug","msg","payload","obj","timestamp","topics","flag","undef","preventDefault","stopPropagation","block","supported","isTouch","tap","down","move","up","in","cancel","scroll","change","fileDrop","over","leave","drop","read","test","reader","FileReader","readAsDataURL","dataTransfer","getBoundingClientRect","opposite","right","bottom","vp","documentElement","clientWidth","clientHeight","isVec","isDim","dimvec","dims","w","h","box","hitTest","pointer","getSide","border","getCursor","animationPreset","wheel","transport","vector","wheelDelta","d","detail","resize","edge","global","min","max","Corner","clientX","clientY","drag","lSide","tSide","globalRange","local","localRange","range","method","constraints","pinchToRotate","_initMultitouchGesture","pinchToZoom","_dragMouse","velocity","_dragMouseEventPattern","reset","transport_","_multitouch","checkToggle","property","link","getTranslation","getRotation","getScale","touches","scale_rotate","lastState","_dragTouchEventPattern","prototype","mix","pointers","rotation","rConst","rubberRange","onLimit","sConst","targetTouches","pinch","multiply","convertTouches","fingers","aMin","aMax","bMin","bMax","clamp","lim","randInt","tolerance","shit","pow","binarySearch","round","linearInterpolation","points","lValue","rValue","getValueFromDictionary","state","factor","isMax","isMin","dir","maxState","minState","buffer","sum","isFinite","Matrix","join","v","angle","_rotate","s","deg","rad","PI","cos","rotateZ","rotateX","rotateY","atan2","asin","apply","assets","signs","words","mac","windows","linux","expressions","int","opt","sentence","randomWord","signIndex","sign","word","source","remote","escape","seed","iterate","destroy","make","enumerable","arguments","Array","put","expression","shuffle","_parseExpressions","ellipsis","lineCount","symbol","getLineHeight","domRect","multiColumn","scrollWidth","scrollHeight","createRange","setEnd","setStart","cursorRect","deleteContents","charAt","toUpperCase","hash","charCodeAt","numberPadding","isBool","String","isArray","Element","constructor","Vec","sqrt","norm","getNorm","dimension"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD;AACvD;;AAEA,6BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA","file":"./index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fw\"] = factory();\n\telse\n\t\troot[\"fw\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmory imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmory exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tObject.defineProperty(exports, name, {\n \t\t\tconfigurable: false,\n \t\t\tenumerable: true,\n \t\t\tget: getter\n \t\t});\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a2698d5980b04880d1d7","\n\n\nimport './style.sass'\n\nexport {default as animation} from './animation'\nexport {default as val}       from './value'\nexport {default as geo}       from './geometry'\nexport {default as arr}       from './array'\nexport {default as vec}       from './vector'\nexport {default as matrix}    from './matrix'\nexport {default as math}      from './math'\nexport {default as color}     from './color'\nexport {default as dom}       from './dom'\nexport {default as event}     from './event'\nexport {default as etc}       from './etc'\nexport {default as text}      from './text'\nexport {default as css}       from './css'\n\nexport {default as Layer}     from './Layer'\nexport {default as Screen}    from './Screen'\nexport {default as Scroller}  from './Scroller'\nexport {default as model}     from './model'\nexport {default as gesture}   from './gesture'\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\n\n\nimport {\n    dom, css, val, geo, vec, matrix,\n    animation, event, text, gesture,\n    Screen\n} from './index'\n\nexport default class Layer {\n    \n    constructor (options) {\n        this.identifier = new Date().getTime()\n        this.event      = event.Machine('Layer')\n        this.data       = null\n        this._dom       = null\n        this._props     = {\n            transformation : {\n                origin    : new vec(),\n                translate : new vec(),\n                scale     : new vec().fill(1),\n                rotate    : 0,\n                matrix3d  : new matrix()\n            },\n            pop : {},\n            templateUpdater              : null,\n            transformationTouchEventLink : null,\n        }\n        // if no options at all\n        if (!val.exists(options)) {\n            this.dom    = dom.create('.default')\n            this.parent = Screen\n        // if options are an tulpet\n        } else if (val.isObj(options)) {\n            // apply dom element\n            if (val.exists(options.dom)) {\n                this.dom = options.dom\n                delete options.dom\n            // if no dom, create just div with .layer\n            } else this.dom = dom.create('.default')\n            // parent\n            if (val.exists(options.parent)) {\n                if (options.parent === null)\n                    delete options.parent\n            } else this.parent = Screen\n            // set other options\n            this.set(options)\n        // if options is a single parameter\n        } else if (val.isDom(options) || val.isStr(options)) {\n            this.dom = options\n            // add if not added\n            if (val.isDom(options) && !options.parentNode)\n                this.parent = Screen\n        }\n    }\n    \n    // external event interface\n    on (topic, fn, options) {\n        // gestures\n        if (topic in gesture)\n            return gesture[topic](this, fn).on()\n        // dom events\n        else if (event.support(this.dom, topic))\n            return event.listener(this.dom, topic, fn, options).on()\n        // custom events\n        else if (topic in event)\n            return event[topic](this, fn).on()\n        // dom css\n        else\n            return this.event.on(topic, fn)\n    }\n    \n    // setter getters\n    set (options) {\n        for (var key in options) {\n            var value = options[key]\n            // use methods\n            if (key in this) {\n                if (val.isFn(this[key]))\n                    this[key](value)\n                else\n                    this[key] = value\n            // set attributes\n            } else if (key in this.dom) this._setAttribute(key, value)\n            // set css parameters\n            else if (key in this.dom.style) this._setCss(key, value)\n        }\n        return this\n    }\n    \n    _setAttribute (option, value) {\n        var set = (key, value) => {\n            this.event.emit(key, value)\n            if (val.exists(value))\n                this.dom.setAttribute(key, value)\n            else\n                this.dom.removeAttribute(key)\n        }\n        if (val.isStr(option))\n            set(option, value)\n        else if (val.isObj(option))\n            for (var key in option)\n                set(key, option[key])\n    }\n    \n    _setCss (options, value) {\n        var set = (key, value) => {\n            this.event.emit(key, value)\n            this.dom.style[key] = value\n        }\n        if (val.isStr(options))\n            set(options, value)\n        else if (val.isObj(options))\n            for (var key in options)\n                set(key, options[key])\n    }\n    \n    getCss (key) {\n        return css.computed(this.dom, key)\n    }\n    \n    set dom (value) {\n        var old = this.dom && this.dom.parentNode? this.dom: null\n        // if dom\n        if (val.isDom(value))\n            this._dom = value\n        // string a string\n        else if (val.isStr(value)) {\n            // template\n            if (value.match(/<.*>.*<\\/.*>/))\n                this._dom = dom.fromString(value)\n            // create new element\n            else this._dom = dom.create(value)\n        }\n        // link dom with layer\n        this._dom.layer = this\n        this.addClass('layer')\n        // replace old dom\n        if (old) old.replaceWith(this.dom) \n    }\n    \n    get dom () {\n        return this._dom\n    }\n    \n    /*\n        model.forEach(function (item) {\n            var layerA = new fw.Layer({\n                margin : 10\n            }).bind(item, {\n                image : {\n                    to   : 'title',\n                    from : 'backgroundImage',\n                    set (value, layer) {\n                        layer.set({content: 'test ' + value})\n                    },\n                    get (value, layer) {\n                        return value\n                    }\n                }\n            })\n        })\n    */\n    \n    bind (model, params) {\n        for (var key in params) {\n            var options   = params[key]\n            var modelKey  = options.to || options\n            var initValue = model[modelKey]\n            var curValue  = null\n            this.on(options.from || key, value => curValue = value)\n            Object.defineProperty(model, modelKey, {\n                set : ((options, key) => {\n                    return value => {\n                        if (options.set)\n                            options.set(value, this)\n                        else {\n                            var param  = {}\n                            param[key] = value\n                            this.set(param)\n                        }\n                    }\n                })(options, key),\n                get : (options => {\n                    return () => {\n                        if (options.get)\n                            return options.get(this)\n                        else \n                            return curValue\n                    }\n                })(options)\n            })\n            model[modelKey] = initValue\n        }\n        return this\n    }\n    \n    destroy () {\n        this.dom.parentNode.removeChild(this.dom)\n        delete this\n    }\n    \n    pop () {\n        this.event.emit('pop', this._props.pop)\n        this._props.pop = {\n            parent : this.dom.parentNode,\n            pos    : new vec(this.dom.style.left, this.dom.style.top),\n            size   : new vec(this.dom.style.width, this.dom.style.height),\n            offset : geo.vpo(this.dom)\n        }\n        this.set({\n            position  : 'fixed',\n            pos       : new vec(),\n            size      : new vec(this.dom.offsetWidth +.5, this.dom.offsetHeight +.5).unit('px'),\n            translate : this._props.pop.offset.position.unit('px')\n        })\n        document.body.appendChild(this.dom)\n        return this\n    }\n    \n    push () {\n        this.event.emit('push', this._props.pop)\n        this._props.pop.parent.appendChild(this.dom)\n        this.set({\n            position  : null,\n            pos       : this._props.pop.pos,\n            size      : this._props.pop.size,\n            translate : new vec(),\n            scale     : new vec(1, 1, 1),\n            origin    : {x: 'center', y: 'center'}\n        })\n        this._props.pop = null\n        return this\n    }\n    \n    animate (options, next, end) {\n        this.event.emit('animate', options)\n        animation.flow(this,\n            options.time  || .5,\n            options.ease  || 'ease-in-out',\n            options.delay || 0,\n            next, end\n        )\n        return this\n    }\n    \n    clone (options) {\n        var clone = this.dom.cloneNode(true)\n\t\tthis.dom.parentNode.appendChild(clone)\n        return new Layer({\n            dom : clone\n        }).set(options)\n    }\n    \n    collision (layer) {\n        var a = geo.vpo(this.dom)\n        var b = geo.vpo(layer.dom)\n        return geo.boxCollision(\n            geo.vecdim(a.position, a.size), \n            geo.vecdim(b.position, b.size)\n        )\n    }\n    \n    // dom structure\n    child (query) {\n        var children = this.dom.querySelector(query)\n        return children.layer || new Layer(children)\n    }\n    \n    childs (query) {\n        var children = this.dom.querySelectorAll(query)\n        var out = []\n        for (var i = 0; i < children.length; i ++)\n            out.push(children[i].layer || new Layer(children[i]))\n        return out \n    }\n    \n    get parent () {\n        if (this.dom.parentNode && this.dom.parentNode.layer) {\n            return this.dom.parentNode.layer instanceof Layer? \n                this.dom.parentNode.layer :\n                new Layer(this.dom.parentNode)\n        }\n    }\n    \n    set parent (value) {\n        this.event.emit('parent', value)\n        if (value instanceof Layer)\n            value.append(this)\n        else\n            value.appendChild(this.dom)\n    }\n    \n    append (value) {\n        this.event.emit('append', value)\n        var append = el => {this.dom.appendChild(el instanceof Layer? el.dom: el)}\n        if (val.isArr(value))\n            value.forEach(append)\n        else\n            append(value)\n    }\n    \n    prepend (value) {\n        this.event.emit('prepend', value)\n        dom.prepend(this.dom, value instanceof Layer? value.dom: value)\n    }\n    \n    detach (value) {\n        this.event.emit('detach', value)\n        this.dom.removeChild(value instanceof Layer? value.dom: value)\n    }\n    \n    set content (value) {\n        var set = string => {\n            this.event.emit('content', string)\n            this.dom.innerHTML = string\n        }\n        if (val.isObj(value))\n            this._props.templateUpdater = \n                dom.template(value.bind, value.html, set)\n        else {\n            set(value)\n            if (this._props.templateUpdater)\n                this._props.templateUpdater.off()\n        }\n    }\n    \n    get content () {\n        return this.dom.innerHTML\n    }\n    \n    // classes\n    toggleClass (value) {\n        this.event.emit('toggleClass', value)\n        return this.dom.classList.toggle(value)\n    }\n    \n    hasClass (value) {\n        return this.dom.classList.contains(value)\n    }\n    \n    addClass (value) {\n        this.event.emit('addClass', value)\n        if (val.isArr(value)) \n            value.forEach(item => this.dom.classList.add(item))\n        else this.dom.classList.add(value)\n    }\n    \n    removeClass (value) {\n        this.event.emit('deleteClass', value)\n        if (val.isArr(value)) \n            value.forEach(item => this.dom.classList.remove(item))\n        else this.dom.classList.remove(value)\n    }\n    \n    // css\n    set move (value) {\n        if ('x' in value) this._setCss('left', value.x)\n        if ('y' in value) this._setCss('top', value.y)\n    }\n    \n    get move () {\n        return new vec(this.dom.offsetLeft, this.dom.offsetTop)\n    }\n    \n    set size (value) {\n        if ('x' in value) this._setCss('width', value.x)\n        if ('y' in value) this._setCss('height', value.y)\n    }\n    \n    get size () {\n        return new vec(this.dom.offsetWidth, this.dom.offsetHeight)\n    }\n    \n    image (value) {\n        this.bg({image: value})\n    }\n    \n    set padding (value) {\n        if (val.isObj(value)) {\n            if ('x' in value && 'y' in value) {\n                this._setCss('padding', `${value.y} ${value.x}`)\n            } else {\n                var params = {}\n                if ('x' in value) params.padding       = `0 ${value.x}`\n                if ('y' in value) params.padding       = `${value.y} 0`\n                if ('l' in value) params.paddingLeft   = value.l\n                if ('t' in value) params.paddingTop    = value.t\n                if ('r' in value) params.paddingRight  = value.r\n                if ('b' in value) params.paddingBottom = value.b\n                this._setCss(params)\n            }\n        } else\n            this._setCss('padding', value)\n    }\n    \n    get padding () {\n        return {\n            l: css.computed(this.dom, 'padding-left'),\n            t: css.computed(this.dom, 'padding-top'),\n            r: css.computed(this.dom, 'padding-right'),\n            b: css.computed(this.dom, 'padding-bottom')\n        }\n    }\n    \n    set margin (value) {\n        if (val.isObj(value)) {\n            if ('x' in value && 'y' in value) {\n                this._setCss('margin', `${value.y} ${value.x}`)\n            } else {\n                var params = {}\n                if ('x' in value) params.margin       = `0 ${value.x}`\n                if ('y' in value) params.margin       = `${value.y} 0`\n                if ('l' in value) params.marginLeft   = value.l\n                if ('t' in value) params.marginTop    = value.t\n                if ('r' in value) params.marginRight  = value.r\n                if ('b' in value) params.marginBottom = value.b\n                this._setCss(params)\n            }\n        } else\n            this._setCss('margin', value)\n    }\n    \n    get margin () {\n        return {\n            l: css.computed(this.dom, 'margin-left'),\n            t: css.computed(this.dom, 'margin-top'),\n            r: css.computed(this.dom, 'margin-right'),\n            b: css.computed(this.dom, 'margin-bottom')\n        }\n    }\n    \n    bg (value) {\n        if (val.isStr(value))\n            this._setCss('background', value)\n        else if (val.isObj(value)) {\n            var params = {}\n            if ('image' in value)\n                params.backgroundImage = \n                    `url(${value.image})`\n            if ('origin' in value)\n                params.backgroundOrigin = val.isObj(value.origin)?\n                    `${value.origin.x} ${value.origin.y}`: value.origin\n            if ('position' in value)\n                params.backgroundPosition = val.isObj(value.position)?\n                    `${value.position.x} ${value.position.y}`: value.position\n            if ('size' in value)\n                params.backgroundSize = val.isObj(value.size)? \n                    `${value.size.x} ${value.size.y}`: value.size\n            if ('repeat' in value)\n                params.backgroundRepeat =\n                    value.repeat == 'x'? 'repeat-x':\n                    value.repeat == 'y'? 'repeat-y':\n                    value.repeat == 'no'? 'no-repeat':\n                    value.repeat == 'yes'? 'repeat': value.repeat\n            if ('color' in value)\n                params.backgroundColor = value.color\n            this._setCss(params)\n        }\n    }\n    \n    text (value) {\n        if (val.isStr(value))\n            this._setCss('font', value)\n        else if (val.isObj(value)) {\n            var props = {\n                style      : 'fontStyle', \n                variant    : 'fontVariant', \n                weight     : 'fontWeight', \n                size       : 'fontSize', \n                height     : 'fontHeight', \n                family     : 'fontFamily',\n                color      : 'color',\n                align      : 'textAlign', \n                lineHeight : 'lineHeight',\n                shadow     : 'textShadow'\n            }\n            for (var key in props) \n                if (key in value) this._setCss(props[key], value[key])\n        }\n    }\n    \n    border (value) {\n        if (val.isStr(value))\n            this._setCss('border', value)\n        else if (val.isObj(value)) {\n            var set = (value, side) => {\n                var props = {\n                    color  : 'Color',\n                    radius : 'Radius',\n                    width  : 'Width',\n                    style  : 'Style'\n                }\n                for (var key in props)\n                    if (key in value)\n                        this._setCss(`border${side}${props[key]}`, value[key])\n            }\n            set(value, '')\n            var props = {\n                l : 'Left', \n                t : 'Top', \n                r : 'Right', \n                b : 'Bottom', \n                tl: 'TopLeft', \n                tr: 'TopRight',\n                bl: 'BottomLeft',\n                br: 'BottomRight'\n            }\n            for (var key in props)\n                if (key in value) \n                    set(value[key], props[key])\n        }\n    }\n    \n    // transformation\n    set origin (value) {\n        this.event.emit('origin', value);\n        ['x', 'y'].forEach(axis => {\n            if (axis in value) \n                this._props.transformation.origin[axis] = value[axis]\n        })\n        css.applyTransformation(this.dom, this._props.transformation, 'origin')\n    }\n    \n    get origin () {\n        return this._props.transformation.origin\n    }\n    \n    set translate (value) {\n        this.event.emit('translate', value);\n        ['x', 'y'].forEach(axis => {\n            if (axis in value) \n                this._props.transformation.translate[axis] = value[axis]\n        })\n        css.applyTransformation(this.dom, this._props.transformation)\n    }\n    \n    get translate () {\n        return this._props.transformation.translate\n    }\n    \n    set scale (value) {\n        this.event.emit('scale', value)\n        if (val.isNum(value)) {\n            this._props.transformation.scale.x =\n            this._props.transformation.scale.y =\n            this._props.transformation.scale.z = value\n        } else\n            ['x', 'y'].forEach(axis => {\n                if (axis in value) \n                    this._props.transformation.scale[axis] = value[axis]\n            })\n        css.applyTransformation(this.dom, this._props.transformation)\n    }\n    \n    get scale () {\n        return this._props.transformation.scale\n    }\n    \n    set rotate (value) {\n        this.event.emit('rotate', value)\n        this._props.transformation.rotate = `${value}${val.isNum(value)?'deg':''}`\n        css.applyTransformation(this.dom, this._props.transformation)\n    }\n    \n    get rotate () {\n        return this._props.transformation.rotate\n    }\n    \n    set matrix (matrix) {\n        this.event.emit('matrix', matrix.value)\n        this._props.transformation.matrix3d = matrix\n        css.applyTransformation(this.dom, this._props.transformation)\n    }\n    \n    get matrix() {\n        return this._props.transformation.matrix3d\n    }\n    \n    // center\n    set center (value) {\n        if (val.exists(value.x)) {\n            this._setCss('left', `${value.x - this.rect.position.x}px`)\n            this.translate = {x: '-50%'}\n        }\n        if (val.exists(value.y)) {\n            this._setCss('top', `${value.y - this.rect.position.y}px`)\n            this.translate = {y: '-50%'}\n        }\n    }\n    \n    get center () {\n        return geo.center(this.rect) \n    }\n    \n    // offset\n    get rect () {\n        return geo.vpo(this.dom)\n    }\n    \n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/Layer.js","\n\n\nimport {vec, event, gesture, Layer} from './index'\n\nclass Screen extends Layer {\n    \n    // external event interface\n    on (topic, fn, options) {\n        // gestures\n        if (topic in event)\n           return gesture[topic](this, fn).on()\n        // dom events\n        else if (event.support(document, topic))\n            return event.listener(document, topic, fn, options).on()\n        // dom css\n        else\n            return this.event.on(topic, fn)\n    }\n    \n    get size () {\n        return new vec(window.innerWidth, window.innerHeight)\n    }\n    \n    get center () {\n        return this.size.scale(.5)\n    }\n    \n}\n\nexport default new Screen(document.body)\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/Screen.js","\n\n\nimport {Layer} from './index'\n\nexport default class Scroller extends Layer {\n    \n    constructor (options) {\n        // this.dom[this.dom.tagName === 'A'? 'href': 'src'] = value\n        options.dom = '.scroller'\n        super(options)\n    }\n    \n    flow (value) {\n        this.dom.classList.add(value || 'y')\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/Scroller.js","\n\n\nimport {css, vec, math, val, event} from './index'\n\n\nexport default {\n\t\n\tanimate (dom) {\n\t\tvar name = `_${new Date().getTime()}`\n\t\tvar keyframes = `@keyframes ${name} {\n            to   {transform : translate(100%)}\n        }`\n\t\t// from {transform : rotate(0.0deg)}\n        document.styleSheets[0].insertRule(keyframes, 0)\n        dom.style[css.vendor.animation] = `${name} 1s`\n\t\tvar end = e => {\n\t\t\tif (e.animationName == name) {\n\t\t\t\tdocument.styleSheets[0].removeRule(name)\n\t\t\t\tdom.style[css.vendor.animation] = null\n\t\t\t\tdom.removeEventListener('animationend', end)\n\t\t\t}\n\t\t}\n\t\tdom.addEventListener('animationend', end)\n\t},\n\t\n\t/*\n\t\tfw.animation.request.on('move', () => {\n\t\t\tscroller.translate = pointer\n\t\t})\n\t\tfw.animation.request.draw()\n\t*/\n\t\n\tdraw : (() => {\n\t\tvar thread = true\n\t\tvar jobs   = {}\n\t\treturn (key, fn) => {\n\t\t\tjobs[key] = fn\n\t\t\tif (thread) {\n\t\t\t\tthread = false\n\t\t\t\twindow.requestAnimationFrame(() => {\n\t\t\t\t\tthread = true\n\t\t\t\t\tfor (var i in jobs) {jobs[i](); delete jobs[i]}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t})(),\n\t\n\t/*\n\t\tdom.set({\n\t\t\ttranslate  : new fw.vec(0, -100),\n\t\t}).flow(1.5, 'ease', 1, {\n\t\t\ttranslate  : new fw.vec(0, 53.5),\n\t\t}, function () {\n\t\t\tconsole.log('done')\n\t\t})\n\t*/\n\t\n\tflow (layer, time, ease, delay, next, end) {\n\t\t// will be deprecated\n\t\tvar bang = () => {\n\t\t\tlayer.dom.removeEventListener('transitionend', bang)\n\t\t\tlayer.dom.style[css.vendor.transition] = null\n\t\t\tif (end) {\n\t\t\t\tif (val.isFn(end))\n\t\t\t\t\tend()\n\t\t\t\telse if (val.isObj(end))\n\t\t\t\t\tlayer.set(end)\n\t\t\t\tend = null\n\t\t\t}\n\t\t}\n\t\tlayer.dom.addEventListener('transitionend', bang)\n\t\tlayer.dom.style[css.vendor.transition] = `${time}s ${ease} ${delay}s`\n\t\tsetTimeout(() => {\n\t\t\tif (val.isFn(next))\n\t\t\t\tnext()\n\t\t\telse if (val.isObj(next))\n\t\t\t\tlayer.set(next)\n\t\t}, 0)\n\t},\n\t\n\tjobs : (() => {\n\t\tvar fps    = 60\n\t\tvar active = false\n\t\tvar jobs   = {}\n\t\treturn (id, job) => {\n\t\t\tvar running = id in jobs\n\t\t\tjobs[id] = job\n\t\t\tif (!active) {\n\t\t\t\tactive = true\n\t\t\t\tvar loop = setInterval(() => {\n\t\t\t\t\tfor (var i in jobs) if (jobs[i]()) delete jobs[i]\n\t\t\t\t\tif (Object.keys(jobs).length == 0) {\n\t\t\t\t\t\tactive = false\n\t\t\t\t\t\tclearTimeout(loop)\n\t\t\t\t\t}\n\t\t\t\t}, 1000 / fps)\n\t\t\t}\n\t\t\treturn running\n\t\t}\n\t})(),\n\t\n\t// Other Functions\n\tgetSinus (from, to, speed) {\n\t\tvar time = new Date().getTime() * 0.001;\n\t\tvar sin  = Math.sin(time * (speed || 1))\n\t\treturn math.map(sin, -1, 1, from, to)\n\t},\n\t\n\t/*\n\t\tvar tilt = fw.animation.decay(velocity => {\n\t        fw.animation.draw(`${layer2.identifier}: velocity`, () => {\n\t            layer2.tilt = velocity.scale(5)\n\t        })\n\t    }).on('end', e => {\n\t        console.log('test')\n\t    })\n\t*/\n\t\n\tdecay (callback, options = {}) {\n\t\tvar id   = window.performance.now()\n\t\tvar e    = new event.Machine('Decay', false)\n\t\tvar job, stop\n\t\tvar types = {\n\t\t\tvec : {\n\t\t\t\tcalculate (a, b, c) {return a.add(b.sub(a).scale(c), 1)},\n\t\t\t\tisEqual   (a, b, c) {return math.isEqual(b.sub(a).len(), 0)}\n\t\t\t},\n\t\t\tnum : {\n\t\t\t\tcalculate (a, b, c) {return a += (b - a) * c},\n\t\t\t\tisEqual   (a, b, c) {return math.isEqual(a, set)}\n\t\t\t}\n\t\t}\n\t\tvar out = {\n\t\t\tto : value => {\n\t\t\t\tif (!val.exists(job)) {\n\t\t\t\t\tjob = {\n\t\t\t\t\t\tvalue : value,\n\t\t\t\t\t\ttype  : types[value instanceof vec? 'vec': 'num']\n\t\t\t\t\t}\n\t\t\t\t\tstop = false\n\t\t\t\t\te.emit('start')\n\t\t\t\t}\n\t\t\t\tthis.jobs(id, () => {\n\t\t\t\t\tif (!stop) {\n\t\t\t\t\t\tjob.type.calculate(job.value, value, options.speed || .1)\n\t\t\t\t\t\tcallback(job.value)\n\t\t\t\t\t\tif (job.type.isEqual(job.value, value)) {\n\t\t\t\t\t\t\t// job  = undefined\n\t\t\t\t\t\t\tstop = true\n\t\t\t\t\t\t\te.emit('end')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar stopped = stop\n\t\t\t\t\tstop = false\n\t\t\t\t\treturn stopped\n\t\t\t\t})\n\t\t\t},\n\t\t\tset (value) {\n\t\t\t\tjob.value = value\n\t\t\t\tcallback(value)\n\t\t\t},\n\t\t\tstop () {\n\t\t\t\tstop = true\n\t\t\t\te.emit('stop')\n\t\t\t\treturn out\n\t\t\t},\n\t\t\ton (topic, fn) {\n\t\t\t\te.on(topic, fn)\n\t\t\t\treturn out\n\t\t\t},\n\t\t}\n\t\treturn out\n\t},\n\t\n\t// easing : {\n\t// \n\t// \tlinear (t) {\n\t// \t\treturn t\n\t// \t},\n\t// \n\t//     easeOutExpo (t) { \n\t// \t   return 1 - Math.pow(2, -10 * t)\n\t// \t},\n\t// \t\n\t// \teaseInQuad (t) { \n\t// \t\treturn Math.sin(t * (Math.PI/2))\n\t// \t},\n\t// \t\n\t// \teaseOutQuad (t) { \n\t// \t\treturn t*(2-t)\n\t// \t},\n\t// \t\t\n\t// \teaseInOutQuint (t) {\n\t// \t\treturn (\n\t// \t\t\tt < 0.5 ? \n\t// \t\t\t16 * Math.pow(t, 5) : (--t) * \n\t// \t\t\t16 * Math.pow(t, 4) + 1\n\t// \t\t)\n\t// \t},\n\t// \t\n\t// \teaseOutElastic (t) {\n\t// \t\tvar p = 0.8\n\t// \t\treturn (\n\t// \t\t\tMath.pow(2, -10 * t) * \n\t// \t\t\tMath.sin((t - p / 4) * (2 * Math.PI) / p) + 1\n\t// \t\t) \n\t// \t},\n\t// \n\t// \teaseOutBounce (t) {\n\t// \t\t\t if (t < 1.0 / 2.75) return 7.5625 * t *  t\n\t// \t\telse if (t < 2.0 / 2.75) return 7.5625 * t * (t -= (1.500 / 2.75)) + 0.750000 \n\t// \t\telse if (t < 2.5 / 2.75) return 7.5625 * t * (t -= (2.250 / 2.75)) + 0.937500\n\t// \t\telse \t\t\t\t\t return 7.5625 * t * (t -= (2.625 / 2.75)) + 0.984375\n\t// \t}\n\t// },\n\t// \n\t// /*\n\t// \tanimation.play(0.5, 'linear', t => {\n\t// \t\telement.style.opacity = 1-t\n\t// \t}, () => {\n\t// \t\tobj.style.display = 'none'\t\n\t// \t})\n\t// */\n\t// \n\t// jobs   : [],\n\t// active : false,\n\t// \n\t// Job : class {\n\t// \tconstructor (time, easing, loop, end) {\n\t// \t\tthis.end\t= end || function () {}\n\t// \t\tvar start \t= new Date()\n\t// \t\tloop(.0)\n\t// \t\tthis.run = () => {\n\t// \t\t\tvar clock = (new Date() - start) / 1000 / time\n\t// \t\t\tloop(clock < 1.? easing(clock): 1.)\n\t// \t\t\treturn (clock < 1.? clock: 1.)\n\t// \t\t}\n\t// \t}\n\t// },\n\t// \n\t// loop () {\n\t// \tvar jobs = []\n\t// \tthis.jobs.forEach(job => {\n\t// \t\tif (job.run() == 1.)\n\t// \t\t\tjob.end()\n\t// \t\telse \n\t// \t\t\tjobs.push(job)\n\t// \t})\n\t// \tthis.jobs = jobs\n\t// \tif (this.jobs.length > 0)\n\t// \t\twindow.requestAnimationFrame(this.loop.bind(this))\n\t// \telse \n\t// \t\tthis.active = null\n\t// },\n\t// \n\t// play (time, type, loop, end) {\n\t// \tthis.jobs.push(new this.Job(\n\t// \t\ttime, this.easing[type], \n\t// \t\tloop, end\n\t// \t))\n\t// \tif (!this.active) {\n\t// \t\tthis.active = true\n\t// \t\twindow.requestAnimationFrame(this.loop.bind(this))\n\t// \t}\n\t// },\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/animation.js","\n\n\nimport {val} from './index'\n\nexport default {\n    \n    // _splitQuery('parent.child.element')\n    _splitQuery (query) {\n        var levels = query.split('.')\n        return {\n            level : levels,\n            last  : levels.length - 1\n        }\n    },\n\n    // level({id: [10, 15]}, _splitQuery('id.0'), 20); -> {id: [20, 15]}\n    _level (object, query, value) {\n\t    var path = object\n\t    for (var n = 0; n < query.last; n ++)\n\t    \tpath = path[query.level[n]]\n\t    if (value)\n\t\t    path[query.level[query.last]] = value\n\t\telse \n            return path[query.level[query.last]]\n    },\n\n    // map(workspaces, 'workspace.items.1')\n    map (array, query) {\n        var levels = this._splitQuery(query)\n        return array.map(list => this._level(list, levels))\n    },\n\n    // var bundle = find(workspaces, {id: id});\n    find (array, query) {\n\t    var output = array.slice()\n        for (var i in query) {\n            var temp = []\n            var map = this.map(output, i)\n            for (var n = 0; n < map.length; n ++)\n                if (map[n] == query[i]) \n                    temp.push(output[n])\n            output = temp.slice()\n        }\n        return output\n    },\n\n    // var deleted = del(workspaces, {'title.color': color});\n    delete (array, query) {\n        var deleted\n        if (val.isObj(query)) {\n            deleted = this.find(array, query)\n            deleted.forEach(found => array.splice(array.indexOf(found), 1))\n        } else {\n            var i = array.indexOf(query)\n            deleted = array.splice(i, 1)\n        }\n        return deleted\n    },\n\n\t// updateColumn([{id: 15}, {id: 30}], {id: [20, 15]}); -> [{id: 20}, {id: 15}]\n    updateColumn (array, query) {\n\t    for (var i in query)\n\t        if (array.length == query[i].length) {\n                var levels = this._splitQuery(i)\n\t            array.forEach((object, index) =>\n                    this._level(object, levels, query[i][index]))\n\t        } else console.log('different lenghtes')\n    },\n    \n    //filterMap(workspaces, {_id, 'id', alias: 'name'});\n    filterMap (array, keys) {\n    \tvar output = []\n    \tarray.forEach(original => {\n\t    \tvar object = {}\n\t    \tfor (var key in keys)\n                object[keys[key]] = original[key]\n\t    \toutput.push(object)\n    \t})\n    \treturn output\n    },\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/array.js","\n\n\nexport default {\n\n    hsva : class {\n\n\t    constructor (hue, saturation, value, alpha) {\n\t\t    this.hue \t\t= hue\n\t\t    this.saturation = saturation\n\t\t    this.value \t\t= value\n\t\t    this.alpha \t\t= alpha\n\t\t}\n\n\t\tget () {\n\t    \tvar trn = 100 - 50 * this.saturation;\n\t\t    return 'hsla('+\n\t\t    \t360 * this.hue +', '+\n\t\t    \t100 * this.saturation +'%, '+ \n\t\t    \ttrn * this.value +'%, '+\n\t\t    \tthis.alpha + ')'\n\t\t}\n    },\n\n\trand (_alpha) {\n\t\tvar rgb \t= () => {return parseInt(Math.random() * 200 + 55)}\n\t\treturn  'rgba('+ rgb() +', '+ rgb() +', '+ rgb() +', '+ (_alpha? _alpha: 0.3) +')'\n\t},\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/color.js","\n\n\nimport {val, text} from './index'\n\nexport default {\n    \n    applyTransformation (element, p, type) {\n        if (type == 'origin') {\n            element.style[this.vendor.transformOrigin]   = `${p.origin.x} ${p.origin.y}`\n            element.style[this.vendor.perspectiveOrigin] = `${p.origin.z}`\n        } else \n            element.style[this.vendor.transform] = \n               `matrix3d(${p.matrix3d.toString()})\n                translate(${p.translate.x}, ${p.translate.y})\n                rotate(${p.rotate})\n                scale(${p.scale.x}, ${p.scale.y})`\n    },\n    \n    computed (element, prop) {\n\t    return parseFloat(\n\t    \tdocument.defaultView\n\t    \t.getComputedStyle(element, null)\n\t    \t.getPropertyValue(prop)\n\t    )\n\t},\n    \n    vendor : (props => {\n        var out = {}\n        if (!val.exists(document)) return out\n        var prefix = [null, 'ms', 'webkit', 'moz', 'o']\n        var div    = document.createElement('div')\n        props.forEach(prop => {\n            for (var i = 0; i < prefix.length; i ++) {\n                var p = prefix[i] + prefix[i]? text.capitalize(prop): prop\n                if (val.exists(div.style[p])) {out[prop] = p; break}\n            }\n        })\n        return out\n    })([\n        'transform', \n        'transformOrigin',\n        'perspectiveOrigin',\n        'columnCount',\n        'transition',\n        'animation'\n    ]),\n    \n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/css.js","\n\n\nimport {css, val} from './index'\n\nexport default {\n    \n    // create ('div#id .class .class')\n    create (query = '') {\n        var classes  = query.replace(/ /g, '').split('.')\n        var tagAndId = []\n        if (classes[0].length == 0) tagAndId = classes[0].split('#')\n        classes.shift()\n        var element = document.createElement(tagAndId[0] || 'div')\n        if (tagAndId.length > 1) element.id = tagAndId[1]\n        classes.forEach(style => element.classList.add(style))\n        return element\n    },\n    \n    template (model, tmp, callback) {\n        var init   = true\n        var active = true\n        var render = function () {\n            var result = tmp.replace(/{([A-z 0-9]+)}/g, ($1, $2) => {\n                if (init) {\n                    var val = model[$2]\n                    Object.defineProperty(model, $2, {\n                        set (value) {\n                            val = value\n                            if (active) render()\n                        },\n                        get : () => val\n                    })\n                }\n                return model[$2]\n            })\n            callback(result)\n            init = false\n        }\n        render()\n        return {\n            on () {\n                active = true\n                return this\n            },\n            off () {\n                active = false\n                return this\n            },\n            get active () {return active}\n        }\n    },\n    \n    fromString (html) {\n\t\tvar parent = document.createElement('div')\n\t    parent.innerHTML = html\n\t    return parent.firstChild\n\t},\n    \n\tprepend (parent, child) {\n    \tif (parent.firstChild) \n    \t\tparent.insertBefore(child, parent.firstChild) \n    \telse \n    \t\tparent.appendChild(child)\n\t},\n    \n\tclone (dom) {\n\t\tvar clone = dom.cloneNode(true);\n\t\tclone.remove = () => this.parentNode.removeChild(this)\n\t\tdom.parentNode.appendChild(clone)\n\t\treturn clone\n\t},\n    \n\tselection (mode) {\n\t\tdocument.ondragstart   =\n\t\tdocument.onselectstart = mode ? null : () => false\n\t},\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/dom.js","\n\n\nimport {val} from './index'\n\nexport default {\n\t\n\tclone (object, methods) {\n\t\treturn Object.assign(Object.assign({}, object), methods)\n\t\t//return JSON.parse(JSON.stringify(_object))\n\t},\n\t\n\tuuid() {\n\t  \treturn `dd-d-d-d-ddd`.replace(/d/g, () =>\n\t\t\tMath.floor((1 + Math.random()) * 0x10000)\n\t\t\t\t.toString(16).substring(1))\n  \t},\n\t\n\tuploadFile (input, onready) {\n\t\tinput.onchange = (() => {\n\t\t\tvar event \t= window.event\n\t\t\tvar files \t= event.target.files\n\t\t\tvar output\t= []\n\t\t\tfor (var i = 0; i < files.length; i ++)\n\t\t\t\tthis.readFile(files[i], function (file) {\n\t\t\t\t\toutput.push(file)\n\t\t\t\t\tif (output.length == files.length) onready(output)\n\t\t\t\t})\n\t\t}).bind(this)\n\t},\n\t\n\tcompressImage (list, scale, onload, quality) {\n\t\tvar compressor = (url, render) => {\n\t\t\tvar image = document.createElement('img')\n\t\t\timage.onload = function () {\n\t\t\t\tvar canvas    = document.createElement('canvas')\n\t\t\t\tvar context   = canvas.getContext('2d')\n\t\t\t\tvar width     = this.width  * scale\n\t\t\t\tvar height    = this.height * scale\n\t\t\t\tcanvas.width  = width\n\t\t\t\tcanvas.height = height\n\t\t\t\tcontext.drawImage(this, 0, 0, width, height)\n\t\t\t\trender(canvas.toDataURL('image/jpeg', quality || 1))\n\t\t\t}\n\t\t\timage.src = url\n\t\t}\n\t\tif (val.isArr(list))\n\t\t\tlist.forEach((url, i) => {\n\t\t\t\tcompressor(url, scaled => {\n\t\t\t\t\tlist[i] = scaled\n\t\t\t\t\tif (i == list.length - 1) onload(urls)\n\t\t\t\t})\n\t\t\t})\n\t\telse\n\t\t\tcompressor(list, onload)\n\t},\n\n/*\n\tdecodeBase64 (dataString) {\n\t\tif (typeof Buffer !== undefined) {\n\t\t\tvar matches = dataString.match(/^data:([A-Za-z-+\\/]+);base64,(.+)$/)\n\t\t\tif (matches.length !== 3) return new Error('invalid input string')\n\t\t\treturn {\n\t\t\t\ttype : matches[1],\n\t\t\t\tdata : new Buffer(matches[2], 'base64')\n\t\t\t}\n\t\t}\n\t},\n*/\n    \n    cookie : {\n\n\t    get (cookies) {\n\t        var object = {}\n\t\t\tif (cookies) {\n\t\t        var params = cookies.split('; ')\n\t\t        params.forEach(param => {\n\t\t            var bundle = param.split('=')\n\t\t            object[bundle[0]] = bundle[1]\n\t\t        })\n\t\t    }\n\t        return object\n\t    },\n\t    \n\t    set (cookies) {\n\t        var string = ''\n\t        for (var key in cookies) string += key +'='+ cookies[key] +'; '\n\t        return string\n\t    },\n\t\n\t    del (cookies, key) {\n\t\t    cookies[key] = '; expires=Thu, 01 Jan 1970 00:00:01 GMT'\n\t    },\n    },\n\n\tsearch : {\n\n\t\tget (address) {\n\t        var object = {}\n\t        var query = address.split('?')[1]\n\t\t\tif (query && query.length > 0) {\n\t\t        var params = query.split('&')\n\t\t        params.forEach(param => {\n\t\t            var bundle = param.split('=')\n\t\t            object[bundle[0]] = bundle[1]\n\t\t        })\n\t\t    }\n\t        return object\n\t    },\n\t\n\t    set (query) {\n\t        var string = ''\n\t        for (var key in query)\n\t            string += key +'='+ query[key] +\n\t                (Object.keys(query).length > 1? '&': '')\n\t        return string\n\t    },\n\t},\n\n    timeout : function (duration, interval, check, execute, timeout) {\n        var count\t= duration / interval\n        var loop \t= setInterval (() => {\n            check (success => {\n                if (success) {\n                    execute()\n                    clearInterval(loop)\n                }\n            })\n            if (count == 0) {\n                timeout && timeout()\n                clearInterval(loop)\n            }\n            count --\n        }, interval * 1000)\n    },\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/etc.js","\n\n\nimport {arr, val, vec, debug, array, Layer} from './index'\n\nexport default {\n    \n    Machine (namespace = 'event', debug = false) {\n        var log = (msg, topic, payload) => {\n            if (out.debug) {\n                var obj = {\n                    topic,\n                    timestamp : new Date().getTime()\n                }\n                if (val.exists(payload)) Object.assign(obj, {payload})\n                console.log(`[${namespace}] ${msg}`, obj)\n            }\n        }\n        var topics = {}\n        var out = {\n            debug,\n            on (topic, callback) {\n                if (!topics[topic]) topics[topic] = []\n                return {\n                    get active () {\n                        return topics[topic] \n                            && topics[topic].indexOf(callback) > -1\n                    },\n                    on () {\n                        if (!this.active) {\n                            log('subscribed to', topic)\n                            topics[topic].push(callback)\n                        }\n                        return this\n                    },\n                    off () {\n                        if (this.active) {\n                            log('unsubscribed from', topic)\n                            array.delete(topics[topic], callback)\n                        }\n                        return this\n                    }\n                }.on()\n            },\n            emit (topic, payload) {\n                log('fired', topic, payload)\n                if (topics[topic])\n                    topics[topic].forEach(callback => callback(payload))\n                return this\n            }\n        }\n        return out\n    },\n    \n    listener (dom, type, callback, flag) {\n        var fn = e => {\n            e.undef = () => {e.preventDefault(); return e}\n            e.stop  = () => {e.stopPropagation(); return e}\n            e.block = () => e.undef().stop()\n            return callback(e)\n        }\n        return {\n            active : false,\n            on () {\n                if (!this.active) {\n                    this.active = true\n                    dom.addEventListener(type, fn, flag)\n                }\n                return this\n            },\n            off () {\n                if (this.active) {\n                    this.active = false\n                    dom.removeEventListener(type, fn, flag)\n                }\n                return this\n            }\n        }\n    },\n    \n    support (element, type) {\n        var supported = `on${type}` in element\n        if (!supported) {\n            element.setAttribute(type, null)\n            supported = typeof element[type] === 'function'\n        }\n        return supported\n    },\n    \n    types : (() => {\n        if (val.exists(window)) {\n\t        var isTouch = 'ontouchstart' in window // window.PointerEvent\n\t        return {\n\t            isTouch,\n                tap    : 'click',\n\t            down   : isTouch? 'touchstart': 'mousedown',\n\t            move   : isTouch? 'touchmove': 'mousemove',\n\t            up     : isTouch? 'touchend': 'mouseup',\n                in     : isTouch? null: 'mouseenter',\n\t            out    : isTouch? null: 'mouseleave',\n                cancel : isTouch? 'touchcancel': null,\n                scroll : 'scroll',\n                change : 'change'\n\t        }\n        }\n    })(),\n    \n    /*\n        var dropZone = layer.on('file', {\n            in () {\n                layer.bg({color: 'red'})\n            },\n            out () {\n                layer.bg({color: null})\n            },\n            drop (data) {\n                console.log(data)\n            }\n        }).on()    \n    */\n    \n\tfileDrop (layer, t = {}) {\n        var over = this.listener(layer.dom, 'dragover',  e => {\n            t.in && t.in({e})\n            leave.on()\n            drop.on()\n            e.preventDefault()\n        })\n        var leave = this.listener(layer.dom, 'dragleave', e => {\n            t.out && t.out({e})\n            leave.off()\n            drop.off()\n            e.preventDefault()\n        })\n        var drop = this.listener(layer.dom, 'drop', e => {\n            t.out && t.out({e})\n        \tvar read = (file, callback) => {\n        \t    if (/\\.(jpe?g|png|gif)$/i.test(file.name)) {\n        \t\t\tvar reader = new FileReader()\n        \t\t\treader.onload = function (e) {\n        \t\t\t\tcallback({\n                            name : file.name, \n                            data : this.result\n                        })\n                    }\n        \t\t\treader.readAsDataURL(file)\n        \t    }\n        \t}\n\t\t\tvar files = e.dataTransfer.files\n\t\t\tvar out\t= []\n\t\t\tfor (var i = 0; i < files.length; i ++)\n\t\t\t\tread(files[i], data => {\n\t\t\t\t\tout.push(data)\n\t\t\t\t\tif (out.length == files.length && t.drop)\n                        t.drop(out)\n\t\t\t\t})\n\t\t\te.preventDefault()\n        })\n        return {\n            get active () {\n                return over.active\n            },\n            on () {\n                over.on()\n                return this\n            },\n            off () {\n                over.off()\n                return this\n            }\n        }\n\t},\n    \n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/event.js","\n\n\nimport {vec, val, math} from './index'\n\nexport default {\n\t\n\t// viewport offset\n\tvpo (dom) {\n\t\tvar rect = dom.getBoundingClientRect()\n    \treturn {\n\t\t\tposition : new vec(rect.left,  rect.top),\n\t\t\topposite : new vec(rect.right, rect.bottom),\n\t\t\tsize     : new vec(rect.width, rect.height)\n\t\t}\n\t},\n\n\tvp () {\n\t\treturn new vec(\n\t\t\tdocument.documentElement.clientWidth,\n\t\t\tdocument.documentElement.clientHeight\n\t\t)\n\t},\n\t\n\tcenter (params) {\n\t\t// for regular vector system\n\t\tif (val.isVec(params))\n\t\t\treturn params.position.add(params.size.scale(.5))\n\t\t// for dimension system\n\t\telse if (val.isDim(params)) {\n\t\t\tvar rect = this.dimvec(params)\n\t\t\treturn rect.position.add(rect.size.scale(.5))\n\t\t}\n\t},\n\t\n\tdimvec (dims) {\n\t\tvar size = \n\t\t\tdims.w? new vec(dims.w, dims.h):\n\t\t\tdims.r? new vec(dims.r - dims.l, dims.b - dims.t): null\n\t\treturn {size, position: new vec(dims.l, dims.t)}\n\t},\n\n\tvecdim (position, size) {\n\t\tvar box = {\n\t\t\tl: position.x, w: size.x,\n\t\t\tt: position.y, h: size.y\n\t\t}\n\t\tbox.r = box.l + box.w\n\t\tbox.b = box.t + box.h\n\t\treturn box\n\t},\n\n\tboxCollision (a, b) {\n\t\treturn (\n\t\t\ta.l < b.l + b.w && a.t < b.t + b.h\n\t\t&&  b.l < a.l + a.w && b.t < a.t + a.h\n\t\t)\n\t},\n\t\n\thitTest (a, pointer) {\n\t\treturn (\n\t\t\ta.l < pointer.x && pointer.x < a.l + a.w\n\t\t&&  a.t < pointer.y && pointer.y < a.t + a.h\n\t\t)\n\t},\n\t\n\tgetSide (pointer, size, border) {\n\t\tvar border  = .5 * border\n\t\treturn {\n\t\t\tx: pointer.x < border? 'l': size.x - pointer.x < border? 'r': 'c',\n\t\t\ty: pointer.y < border? 't': size.y - pointer.y < border? 'b': 'c'\n\t\t}\n\t},\n\t\n\t// {x: 'l|c|r', y: 't|m|b'}\n\tgetCursor (side) {\n\t\treturn side? {\n\t\t\tt: {l: 'nw-resize', c: 'n-resize', r: 'ne-resize'},\n\t\t\tc: {l:  'w-resize', c:     'move', r:  'e-resize'},\n\t\t\tb: {l: 'sw-resize', c: 's-resize', r: 'se-resize'}\n\t\t}[side.y][side.x]: null\t\n\t},\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/geometry.js","\n\n\nimport {\n    animation, vec, event, math, \n    Screen, matrix, Layer, val,\n    geo, etc\n} from './index'\n\nvar animationPreset = {\n    time : .3, \n    ease : 'cubic-bezier(.1, .5, .1, 1.2)',\n}\n\nexport default {\n    \n    wheel (layer, transport = {}) {\n        return layer.on('mousewheel', e => {\n            var vector = 0\n            var w = e.wheelDelta\n            var d = e.detail\n            if (d) {\n                // Opera\n                if (w) vector = w / d / 40 * d > 0? 1: -1\n                // Firefox\n                else vector = -d / 3\n            // IE / Safari / Chrome\n            } else vector = w / 120\n            transport({e, vector})\n        })\n    },\n    \n    resize (layer, transport = {}) {\n        var edge = ['lt', 't', 'rt', 'l', 'r', 'lb', 'b', 'rb']\n        var t    = {}\n        var out  = {global: {min: {}, max: {}}}\n        var Corner = side => {\n            var div = document.createElement('div')\n            div.classList.add('edge', side)\n            var down = event.listener(div, event.types.down, e => {\n                t.down = new vec(e.clientX, e.clientY)\n                t.rect = layer.rect\n                move.on()\n                up.on()\n                e.stop()\n            })\n            var move = event.listener(document, event.types.move, e => {\n                var drag  = new vec(e.clientX, e.clientY).sub(t.down)\n                var lSide = side == 'lt' || side == 'l' || side == 'lb'\n                var tSide = side == 'lt' || side == 't' || side == 'rt'\n                var size  = out.global? globalRange(out.global, drag, lSide || tSide): drag\n                if (lSide) size.x *= -1\n                if (tSide) size.y *= -1\n                size = out.local? localRange(out.local, size): size\n                if (side == 't' || side == 'b') size.x = 0\n                if (side == 'l' || side == 'r') size.y = 0\n                if (lSide) move.x = -size.x\n                if (tSide) move.y = -size.y\n                // export\n                out.move = move\n                out.size = size\n                // move and resize\n                if (transport.move && transport.move(out) !== false || !transport.move) {\n                    layer.size = t.rect.size.add(size).unit('px')\n                    layer.move = t.rect.position.add(move).unit('px')\n                }\n                e.stop()\n            })\n            var up = event.listener(document, event.types.up, e => {\n                move.off()\n                up.off()\n                e.stop()\n            })\n            var globalRange = (range, drag, opposite) => {\n                if (opposite) {\n                    drag = drag\n                        .add(t.rect.position)\n                        .range({l: range.max.l, t: range.max.t, r: range.min.l, b: range.min.t})\n                        .sub(t.rect.position)\n                } else {\n                    drag = drag\n                        .add(t.rect.opposite)\n                        .range({l: range.min.r, t: range.min.b, r: range.max.r, b: range.max.b})\n                        .sub(t.rect.opposite)\n                }\n                return drag\n            }\n            var localRange = (range, size) => {\n                size = size\n                    .add(t.rect.size)\n                    .range({l: range.min.x, t: range.min.y, r: range.max.x, b: range.max.y})\n                    .sub(t.rect.size)\n                return size\n            }\n            return {\n                get active () {\n                    return down.active\n                },\n                on () {\n                    layer.dom.appendChild(div)\n                    down.on()\n                },\n                off () {\n                    layer.dom.removeChild(div)\n                    down.off()\n                },\n            }\n        }\n        return {\n            get active () {\n                return edge[0].down.active\n            },\n            on () {\n                edge.forEach(edge => {\n                    if (val.isStr(edge)) edge = Corner(edge)\n                    edge.on()\n                })\n                return this\n            },\n            off () {\n                edge.forEach(edge => edge.off())\n                return this\n            },\n            cancel () {\n                return this\n            },\n        }\n    },\n    \n    drag (layer, transport = {}) {\n        var translate = new vec()\n        var method = event.types.isTouch? '_initMultitouchGesture': '_dragMouse'\n        return this[method](layer, etc.clone(transport, {\n            move (t) {\n                if (transport.move && transport.move(t) !== false || !transport.move) {\n                    translate = t.translate\n                    if (t.constraints) \n                        translate.range(t.constraints, true)\n                    animation.draw(`${layer.identifier}: translate.move`,\n                        () => layer.matrix = new matrix().translate(translate))\n                }\n            },\n            cancel (t) {\n                t.translate = translate\n                if (transport.cancel && transport.cancel(t) !== false || !transport.cancel)\n                    animation.draw(`${layer.identifier}: translate.cancel`,\n                        () => layer.animate(animationPreset, {matrix : new matrix()}))\n            }\n        }), 'translate')\n    },\n    \n    pinchToRotate (layer, transport = {}) {\n        return this._initMultitouchGesture(layer, etc.clone(transport, {\n            move (t) {\n                if (transport.move && transport.move(t) !== false || !transport.move)\n                    animation.draw(`${layer.identifier}: rotate.move`,\n                        () => layer.rotate = t.rotate)\n            },\n            cancel (t) {\n                if (transport.cancel && transport.cancel(t) !== false || !transport.cancel)\n                    animation.draw(`${layer.identifier}: rotate.cancel`, \n                        () => layer.animate(animationPreset, {rotate : 0}))\n            }\n        }), 'rotate')\n    },\n    \n    pinchToZoom (layer, transport = {}) {\n        return this._initMultitouchGesture(layer, etc.clone(transport, {\n            move (t) {\n                if (transport.move && transport.move(t) !== false || !transport.move)\n                    animation.draw(`${layer.identifier}: scale.move`, () => {\n                        layer.scale = t.scale\n                    })\n            },\n            cancel (t) {\n                if (transport.cancel && transport.cancel(t) !== false || !transport.cancel)\n                    animation.draw(`${layer.identifier}: scale.cancel`, () => {\n                        layer.animate(animationPreset, {\n                            scale : 1\n                        })\n                    })\n            }\n        }), 'scale')\n    },\n    \n    /*\n        this is the second layer of interaction\n        for mouse are separate functions for dragging\n        for touch is one single that splits translation, rotation and scale\n    */\n    \n    _dragMouse (layer, transport) {\n        var down     = new vec()\n        var velocity = new vec()\n        return this._dragMouseEventPattern(layer, etc.clone(transport, {\n            down (t) {\n                velocity\n                down = velocity = t.pointer\n                transport.down && transport.down({\n                    event : t.event, \n                    down\n                })\n            },\n            move (t) {\n                var translate = t.pointer.sub(down)\n                transport.move && transport.move({\n                    event     : t.event, \n                    translate,\n                    velocity  : translate.sub(velocity)\n                })\n                velocity = translate\n            },\n            cancel (t) {\n                transport.cancel(t)\n                down.reset()\n                velocity.reset()\n            },\n        }))\n    },\n    \n    _initMultitouchGesture (layer, transport, type) {\n        var address = 'transformationTouchEventLink'\n        if (!layer._props[address]) {\n            var listener   = new event.Machine('transformationTouchEventLink')\n            var transport_ = {constraints: {}}\n            ;['init', 'down', 'move', 'up', 'cancel'].forEach(key => \n                transport_[key] = t => listener.emit(key, t))\n            var toggle = this._multitouch(layer, transport_)\n            layer._props[address] = {\n                listener,\n                transport : transport_,\n                cancel    : toggle.cancel,\n                checkToggle () {\n                    var flag = 'off'\n                    var property = ['translate', 'rotate', 'scale']\n                    for (var i = 0; i < property.length; i ++)\n                        if (transport_[property[i]]) {flag = 'on'; break}\n                    toggle[flag]()\n                }\n            }\n        }\n        var link = layer._props[address]\n        for (var key in transport)\n            link.listener.on(key, ((method, key) => {\n                return key == 'move'? t => {\n                    // adapt output for every type\n                    if (type == 'translate') t.translate = t.transformation.getTranslation()\n                    if (type == 'rotate') t.rotate = t.transformation.getRotation().z\n                    if (type == 'scale') t.scale = t.transformation.getScale().z\n                    // execute event function\n                    method(t)\n                    // apply new transport to the whole\n                    // transformation multitouch event\n                    link.transport.constraints[type] = t.constraints\n                    delete t.constraints\n                }: method\n            })(transport[key], key))\n        return {\n            get active () {\n                return link.transport[type]\n            },\n            on () {\n                link.transport[type] = true\n                link.checkToggle()\n                return this\n            },\n            off () {\n                link.transport[type] = false\n                link.checkToggle()\n                return this\n            },\n            cancel : link.cancel,\n        }\n    },\n    \n    _multitouch (layer, transport) {\n        // some shared values\n        var touches      = {}\n        var scale_rotate = new matrix()\n        var lastState    = new matrix()\n        var origin       = new vec()\n        var center       = new vec()\n        var translate    = new vec()\n        // export control interface for gesture events\n        return this._dragTouchEventPattern(layer, {\n            init (t) {\n                // get at start of a session \n                // a center of a layer\n                center = layer.center\n            },\n            down (t) {\n                // fire interface function\n                transport.down && transport.down(t)\n                // calculate average vector aka origin and\n                // bring this origin on rotated and scaled object back\n                origin = vec.prototype.mix(t.pointers)\n                    .sub(center)\n                    .sub(translate)\n            },\n            move (t) {\n                // define max and min movement for rotation and scale\n                // translation constraints happens later on touch and mouse together\n                var rotate = t.event.rotation || 0\n                var rConst = transport.constraints.rotate\n                if (rConst) {\n                    var last = lastState.getRotation().z\n                    rotate = math.rubberRange(\n                    rotate + last, rConst.min, rConst.max,\n                    rConst.length || 10, rConst.onLimit) - last\n                }\n                var scale  = t.event.scale || 1\n                var sConst = transport.constraints.scale\n                if (sConst) {\n                    var last = lastState.getScale().z\n                    scale = math.rubberRange(\n                    scale + last, sConst.min + 1, sConst.max + 1,\n                    sConst.length || .2, sConst.onLimit) - last\n                }\n                // calculate drag difference\n                var velocity = new vec()\n                for (var id in t.pointers) {\n                    // if a touch is not initialized, \n                    // save its vector to the list\n                    if (!touches[id]) touches[id] = t.pointers[id]\n                    // calculate difference between frames\n                    velocity\n                        .add(t.pointers[id], true)\n                        .sub(touches[id], true)\n                    // save value for the next time\n                    touches[id] = t.pointers[id]\n                }\n                // calculate average difference between every dragged touch\n                velocity.div(new vec().fill(t.event.targetTouches.length), true)\n                // apply difference to persistent translation vector\n                translate.add(velocity, true)\n                // modify scale and rotation matrix\n                var drag  = new matrix()\n                var pinch = new matrix().translate(origin.scale(-1))\n                if (transport.translate) drag.translate(translate, true)\n                if (transport.rotate) pinch.rotate(rotate, true)\n                if (transport.scale) pinch.scale(scale, true)\n                scale_rotate = lastState.multiply(pinch.translate(origin))\n                // get final transformation\n                var transformation = scale_rotate.multiply(drag)\n                // export values\n                transport.move && transport.move({\n                    event : t.event,\n                    transformation,\n                    velocity\n                })\n            },\n            up (t) {\n                // apply matrix for the next drag action\n                if (t.event.targetTouches.length > 0) lastState = scale_rotate\n                transport.up && transport.up(t)\n            },\n            cancel (t) {\n                // export up event\n                transport.cancel && transport.cancel(t)\n                center.reset()\n                lastState.reset()\n                translate.reset()\n                scale_rotate.reset()\n                origin.reset()\n                touches = {}\n            },\n        })\n    },\n    \n    /*\n        this is the lowest level of mouse and touch interaction principles\n        support of four main methods: down, move, up and cancel\n    */\n    \n    _dragMouseEventPattern (layer, transport) {\n        var down = event.listener(layer.dom, 'mousedown', e => {\n            if (!move.active) {\n                move.on()\n                up.on()\n            }\n            transport.down && transport.down({\n                event   : e, \n                pointer : new vec(e.clientX, e.clientY)\n            })\n            e.preventDefault()\n        })\n        var move = event.listener(document, 'mousemove', e => {\n            transport.move && transport.move({\n                event   : e,\n                pointer : new vec(e.clientX, e.clientY)\n            })\n            e.preventDefault()\n        })\n        var up = event.listener(document, 'mouseup', e => {\n            var t = {\n                event   : e,\n                pointer : new vec(e.clientX, e.clientY)\n            }\n            transport.up && transport.up(t)\n            cancel(t)\n            e.preventDefault()\n        })\n        var cancel = (t = {}) => {\n            move.off()\n            up.off()\n            transport.cancel && transport.cancel(t)\n        }\n        return {\n            get active () {\n                return down.active\n            },\n            on () {\n                down.on()\n                return this\n            },\n            off () {\n                cancel()\n                down.off()\n                return this\n            },\n            cancel,\n        }\n    },\n    \n    _dragTouchEventPattern (layer, transport) {\n        var convertTouches = fingers => {\n            var out = {}\n            for (var i = 0; i < fingers.length; i ++) \n                out[fingers[i].identifier] = new vec(\n                    fingers[i].clientX,\n                    fingers[i].clientY\n                )\n            return out\n        }\n        var down = event.listener(layer.dom, 'touchstart', e => {\n            if (!move.active) {\n                move.on()\n                up.on()\n                transport.init({event: e})\n            }\n            transport.down && transport.down({\n                event    : e,\n                pointers : convertTouches(e.targetTouches)\n            })\n            e.preventDefault()\n        })\n        var move = event.listener(layer.dom, 'touchmove', e => {\n            transport.move && transport.move({\n                event    : e,\n                pointers : convertTouches(e.targetTouches)\n            })\n            e.preventDefault()\n        })\n        var up = event.listener(layer.dom, 'touchend', e => {\n            var t = {event: e}\n            transport.up && transport.up(t)\n            if (e.targetTouches.length == 0) cancel(t)\n            e.preventDefault()\n        })\n        var cancel = (t = {}) => {\n            move.off()\n            up.off()\n            transport.cancel && transport.cancel(t)\n        }\n        return {\n            get active () {\n                return down.active\n            },\n            on () {\n                down.on()\n                return this\n            },\n            off () {\n                cancel()\n                down.off()\n                return this\n            },\n            cancel,\n        }\n    },\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/gesture.js","\n\nimport {val} from './index'\n\nexport default {\n\t\n\tto (t, a, b) {\n\t\treturn this.map(t, 0, 1, a, b, true)\n\t},\n\n\tmap (value, aMin, aMax, bMin, bMax, clamp) {\n\t\tvar x = clamp == true? (\n\t\t\tvalue < aMin? aMin:\n\t\t\tvalue > aMax? aMax: value\n\t\t):  value\n\t\treturn (\n\t\t\t(x - aMin) / \n\t\t\t(aMax - aMin) * \n\t\t\t(bMax - bMin) + bMin\n\t\t)\n\t},\n\t\n\tmin (x, lim) {\n\t\treturn x > lim? x: lim\n\t},\n\t\n\tmax (x, lim) {\n\t\treturn x < lim? x: lim\n\t},\n\t\n\trange (min, val, max) {\n\t\treturn this.max(this.min(val, min), max)\n\t},\n\t\n\trandInt (min, max) {\n\t\treturn Math.floor(this.to(Math.random(), min, max))\n\t},\n\t\n\tisEqual (a, b, tolerance = 1) {\n\t\tvar shit = Math.pow(10, -tolerance)\n\t\treturn a - shit < b && b < a + shit\n\t},\n\t\n\tbinarySearch (length, check) {\n        var i =  Math.floor(.5 * length) // result\n\t\tvar h = i // pointer\n        while (h > 1) {\n            h = Math.round(.5 * h)\n            i += (check(i)? 1: -1) * h\n\t\t}\n        check(i, true)\n        return i\n\t},\n\t\n\tlinearInterpolation (t, points) {\n\t\t// Init\n\t\tvar params \t= []\n\t\tvar x \t\t= 0\n\t\t// Find Sector\n\t\tfor (var i = 0; i < points.length - 1; i ++) \n\t\t\tif (t >= points[i][0]) x = i; else break\n\t\t// Find Left and Right Side\n\t\tvar lValue = points[x]\n\t\tvar rValue = points[x+1]\n\t\t// Interpolate Parameters\n\t\tfor (var i = 1; i < lValue.length; i ++)\n\t\t\tparams.push(this.map(t, lValue[0], rValue[0], lValue[i], rValue[i]))\n\t\t// Return\n\t\treturn params\n\t},\n\n\tgetValueFromDictionary (value, list) {\n\t\tvar out\n\t\tfor (var i = 0; i < list.length; i ++)\n\t\t\tif \t(value >= list[i][0]) out = list[i][1]\n\t\treturn out\n\t},\n\n\trubberRange (value, min, max, range, state) {\n        // https://www.desmos.com/calculator\n        // Based on 1-pow(1+x,-1)\n\t\tvar factor = 1.3\n\t\tvar isMax  = val.exists(min)\n\t\tvar isMin  = val.exists(max)\n\t\tif (isMax || isMin) {\n\t\t\tvar dir   = value < min\n\t\t\tvar range = (dir? 1: -1) * range\n\t\t\tvar len   = dir? min: max\n\t\t\tvar x     = (len - value) / range\n\t\t\tvar y     = len - range * (1 - Math.pow(1 + x, -factor))\n\t\t}\n\t\tvar maxState = isMax && value < min\n\t\tvar minState = isMin && value > max\n\t\tif (state) state(maxState? 'max': minState? 'min': null)\n\t\treturn (maxState || minState? y: value)\n\t},\n\t\n\t// var buffer = new Buffer(10) then var value = buffer.get(23.445) \n    buffer : class {\n\t\t\n\t\tconstructor (size) {\n        \tthis.array = []\n        \tthis.size  = size\n        }\n\t\t\n        get (value) {\n            var sum    = 0\n            var length = this.array.length\n            if (length > this.size) this.array.shift()\n            this.array.push(value)\n            for (var i = 0; i < length; i ++) \n            \tif (isFinite(this.array[i])) \n                    sum += parseFloat(this.array[i])\n            return sum / length\n        }\n    },\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/math.js","\n\n\nimport {val, vec} from './index'\n\n/*\n    // TODO: http://franklinta.com/2014/09/08/computing-css-matrix3d-transforms/\n    http://www.alanzucconi.com/2016/02/10/tranfsormation-matrix/\n    https://github.com/infamous/boxer/blob/master/src/math/Quaternion.js\n    http://jsfiddle.net/dFrHS/1/\n    http://keithclark.co.uk/articles/calculating-element-vertex-data-from-css-transforms/\n*/\n\nvar init = [\n    1, 0, 0, 0, \n    0, 1, 0, 0,\n    0, 0, 1, 0, \n    0, 0, 0, 1\n]\n\nexport default class Matrix {\n    \n    constructor (value) {\n        this.value = \n            !val.exists(value)? init:\n             val.isStr(value)? this.fromString(value): value\n    }\n    \n    multiply (matrix, set) {\n        var a = this.value\n        var b = matrix instanceof Matrix? matrix.value: matrix\n        // 4x4 Matrix Multiplication\n        var result = [\n\t\t\ta[ 0]*b[0] + a[ 1]*b[4] + a[ 2]*b[ 8] + a[ 3]*b[12],\n\t\t\ta[ 0]*b[1] + a[ 1]*b[5] + a[ 2]*b[ 9] + a[ 3]*b[13],\n\t\t\ta[ 0]*b[2] + a[ 1]*b[6] + a[ 2]*b[10] + a[ 3]*b[14],\n\t\t\ta[ 0]*b[3] + a[ 1]*b[7] + a[ 2]*b[11] + a[ 3]*b[15],\n\t\t\ta[ 4]*b[0] + a[ 5]*b[4] + a[ 6]*b[ 8] + a[ 7]*b[12],\n\t\t\ta[ 4]*b[1] + a[ 5]*b[5] + a[ 6]*b[ 9] + a[ 7]*b[13],\n\t\t\ta[ 4]*b[2] + a[ 5]*b[6] + a[ 6]*b[10] + a[ 7]*b[14],\n\t\t\ta[ 4]*b[3] + a[ 5]*b[7] + a[ 6]*b[11] + a[ 7]*b[15],\n\t\t\ta[ 8]*b[0] + a[ 9]*b[4] + a[10]*b[ 8] + a[11]*b[12],\n\t\t\ta[ 8]*b[1] + a[ 9]*b[5] + a[10]*b[ 9] + a[11]*b[13],\n\t\t\ta[ 8]*b[2] + a[ 9]*b[6] + a[10]*b[10] + a[11]*b[14],\n\t\t\ta[ 8]*b[3] + a[ 9]*b[7] + a[10]*b[11] + a[11]*b[15],\n\t\t\ta[12]*b[0] + a[13]*b[4] + a[14]*b[ 8] + a[15]*b[12],\n\t\t\ta[12]*b[1] + a[13]*b[5] + a[14]*b[ 9] + a[15]*b[13],\n\t\t\ta[12]*b[2] + a[13]*b[6] + a[14]*b[10] + a[15]*b[14],\n\t\t\ta[12]*b[3] + a[13]*b[7] + a[14]*b[11] + a[15]*b[15]\n\t\t]\n        if (set) {\n            this.value = result\n            return this\n        } else \n            return new Matrix(result)\n\t}\n    \n    /* \n        extract floats \n        from 'matrix3d(0, -1, 0.182, -0.465)'\n        to [0, -1, 0.182, -0.46]\n    */\n    \n    fromCss (string) {\n        return string\n            .match(/-?(\\d+(.\\d+)?)(?=,|\\))/g)\n            .map(parseFloat)\n    }\n    \n    toCss () {\n        return `matrix3d(${this.toString()})`\n    }\n    \n    toString() {\n        return this.value.join(',')\n    }\n    \n    translate (v, set) {\n        var {x,y,z} = v\n        return this.multiply([\n            1, 0, 0, 0, \n            0, 1, 0, 0,\n            0, 0, 1, 0,\n            x, y, z, 1\n        ], set)\n    }\n    \n    getTranslation () {\n        return new vec(\n            this.value[12], \n            this.value[13], \n            this.value[14]\n        )\n    }\n    \n    scale (v, set) {\n        if (val.isNum(v))\n            return this.scale(new vec().fill(v), set)\n        else {\n            var {x, y, z} = v\n            return this.multiply([\n                x, 0, 0, 0, \n                0, y, 0, 0,\n                0, 0, z, 0, \n                0, 0, 0, 1\n            ], set)\n        }\n    }\n    \n    getScale () {\n        return new vec(\n            this.value[0], \n            this.value[5], \n            this.value[10]\n        )\n    }\n    \n    rotateX (angle, set) {\n\t\treturn this._rotate(angle, (c, s) => [\n\t\t\t1, 0, 0, 0, \n            0, c,-s, 0,\n\t\t\t0, s, c, 0, \n            0, 0, 0, 1\n\t\t], set)\n\t}\n    \n\trotateY (angle, set) {\n\t\treturn this._rotate(angle, (c, s) => [\n\t\t\t c, 0, s, 0, \n             0, 1, 0, 0,\n\t\t\t-s, 0, c, 0, \n             0, 0, 0, 1\n\t\t], set)\n\t}\n    \n\trotateZ (angle, set) {\n\t\treturn this._rotate(angle, (c, s) => [\n\t\t\tc,-s, 0, 0, \n            s, c, 0, 0,\n\t\t\t0, 0, 1, 0, \n            0, 0, 0, 1\n\t\t], set)\n\t}\n    \n    _rotate (deg, template, set) {\n        var rad = -deg * Math.PI / 180\n\t\treturn this.multiply(template(Math.cos(rad), Math.sin(rad)), set)\n    }\n    \n    rotate (v, set) {\n        if (val.isNum(v))\n            return this.rotateZ(v, set)\n        else {\n            return this\n                .rotateX(v.x, set)\n                .rotateY(v.y, set)\n                .rotateZ(v.z, set)\n        }\n    }\n    \n    getRotation () {\n        return new vec(\n            Math.atan2(this.value[9], this.value[10]),\n            Math.asin(-this.value[8]),\n            Math.atan2(this.value[4], this.value[0])\n        ).apply(axis => - axis.value * 180 / Math.PI)\n    }\n    \n    resetRotation () {\n        [0, 1, 2, 4, 5, 6, 8, 9, 10].forEach(i => this.value[i] = init[i])\n        return this\n    }\n    \n    // projectionMapping (lt, lb, rt, rb) {\n    //     var w = 1, h = 1;\n    //     var adj = function (m) { return [\n    //         m[4]*m[8]-m[5]*m[7], m[2]*m[7]-m[1]*m[8], m[1]*m[5]-m[2]*m[4],\n    //         m[5]*m[6]-m[3]*m[8], m[0]*m[8]-m[2]*m[6], m[2]*m[3]-m[0]*m[5],\n    //         m[3]*m[7]-m[4]*m[6], m[1]*m[6]-m[0]*m[7], m[0]*m[4]-m[1]*m[3]\n    //     ]}\n    //     var multmv = function (m, v) { return [\n    //         m[0]*v[0] + m[1]*v[1] + m[2]*v[2],\n    //         m[3]*v[0] + m[4]*v[1] + m[5]*v[2],\n    //         m[6]*v[0] + m[7]*v[1] + m[8]*v[2]\n    //     ]}\n    //     var multmm = function (a, b) {\n    //         var c = Array(9)\n    //         for (var i = 0; i != 3; ++i)\n    //             for (var j = 0; j != 3; ++j) {\n    //                 var cij = 0\n    //                 for (var k = 0; k != 3; ++k)\n    //                     cij += a[3*i + k]*b[3*k + j]\n    //                 c[3*i + j] = cij\n    //             }\n    //         return c\n    //     }\n    //     var basisToPoints = function (x1, y1, x2, y2, x3, y3, x4, y4) {\n    //         var m = [\n    //             x1, x2, x3,\n    //             y1, y2, y3,\n    //              1,  1,  1\n    //         ]\n    //         var v = multmv(adj(m), [x4, y4, 1])\n    //         return multmm(m, [\n    //             v[0], 0, 0,\n    //             0, v[1], 0,\n    //             0, 0, v[2]\n    //         ])\n    //     }\n    //     var s = basisToPoints(\n    //         0, 0, w, 0, \n    //         0, h, w, h\n    //     )\n    //     var d = basisToPoints(\n    //         lt.x, lt.y, lb.x, lb.y, \n    //         rt.x, rt.y, rb.x, rb.y\n    //     )\n    //     var t = multmm(d, adj(s))\n    //     for (i = 0; i != 9; ++i) t[i] = t[i]/t[8];\n    //     return [\n    //         t[0], t[3], 0, t[6],\n    //         t[1], t[4], 0, t[7],\n    //            0,    0, 1,    0,\n    //         t[2], t[5], 0, t[8]\n    //     ]\n    // }\n    \n    reset () {\n        this.value = init\n        return this\n    }\n\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/matrix.js","\n\n\nimport {val, text, math, etc, arr} from './index'\n\nvar assets = {\n    signs : ['', ',', '.', '?', '!'],\n    words : 'accusam aliquyam amet at clita consetetur diam dolor dolore dolores duo ea eirmod elitr eos erat est et gubergren invidunt ipsum justo kasd labore lorem magna no nonumy rebum sad sanctus sea sed sit stet takimata tempor ut vero voluptua'.split(' '),\n    image : {\n        mac : ['Abstract', 'Antelope Canyon', 'Bahamas Aerial', 'Beach', 'Blue Pond', 'Bristle Grass', 'Brushes', 'Circles', 'Death Valley', 'Desert', 'Ducks on a Misty Pond', 'Eagle & Waterfall', 'Earth and Moon', 'Earth Horizon', 'El Capitan 2', 'El Capitan', 'Elephant', 'Flamingos', 'Floating Ice', 'Floating Leaves', 'Foggy Forest', 'Forest in Mist', 'Foxtail Barley', 'Frog', 'Galaxy', 'Grass Blades', 'Hawaiian Print', 'Isles', 'Lake', 'Lion', 'Milky Way', 'Moon', 'Mountain Range', 'Mt. Fuji', 'Pink Forest', 'Pink Lotus Flower', 'Poppies', 'Red Bells', 'Rice Paddy', 'Rolling Waves', 'Shapes', 'Sierra 2', 'Sierra', 'Sky', 'Snow', 'Underwater', 'Wave', 'Yosemite 2', 'Yosemite 3', 'Yosemite 4', 'Yosemite 5', 'Yosemite', 'Zebras'],\n        windows : [\n            '...'\n        ],\n        linux : [\n            '...'\n        ]\n    }\n}\n\nvar expressions = {\n    \n    // {type: int, mode: cycle, from: 1}\n    // {type: int, mode: forward, from: 1}\n    // {type: int, mode: random, min: 1, max: 10}\n    int (opt) {\n        return {i: 0, method: 'int', mode: opt.mode, render () {\n            return opt.mode == 'forward' || opt.mode == 'loop'?\n                opt.from + this.i ++:\n            opt.mode == 'random'?\n                Math.floor(math.to(Math.random(), opt.min, opt.max)):\n                this.i\n        }}\n    },\n    \n    // {type: string, mode: text, count: 20}\n    // {type: string, mode: text, min: 20, max 100}\n    string (opt) {\n        return {render () {\n            var count = \n                opt.count? opt.count:\n                Math.floor(math.to(Math.random(), opt.min, opt.max))\n            var capitalize = true\n            var sentence   = ''\n            for (var i = 0; i < count; i ++) {\n                var randomWord = assets.words[Math.floor(Math.random() * assets.words.length)]\n                var signIndex  = Math.floor(Math.pow(Math.random(), 20) * assets.signs.length)\n                var sign       = assets.signs[math.min(signIndex, i < count - 1? 0: 2)] + ' '\n                var word       = capitalize? text.capitalize(randomWord): randomWord\n                sentence += word + sign\n                capitalize = signIndex > 1\n            }\n            return sentence.substring(0, sentence.length - 1)\n        }}\n    },\n    \n    // {type: image, source: local}\n    image (opt) {\n        var source = {\n            remote (i) {return `https://unsplash.it/500?image=${i}`},\n            local  (i) {return `file:///Library/Desktop%20Pictures/${\n                escape(assets.image.mac[i % assets.image.mac.length])}.jpg`}\n        }\n        var seed = math.randInt(0, 1000)\n        return {i: 0, render () {\n            return source[opt.source || 'local'](seed + this.i ++)\n        }}\n    },\n    \n    // get(i => {return custom[i]})\n    iterate (callback) {\n        return {type: 'expression', i: 0, render () {\n            return callback(this.i ++)\n        }}\n    },\n}\n\nexport default {\n    \n    /*\n        model.on('make', item => {\n            return new fw.Layer({\n                parent : scroller,\n                size   : new fw.vec(100, 100),\n                margin : 10\n            })\n        })\n        \n        model.on('destroy', item => {\n            item.layer.animate({}, {\n                margin : {x: -item.layer.size.x / 2},\n                scale  : {x: 0}\n            },{\n                destroy : true\n            })\n        })\n    */\n    \n    init (model = []) {\n        var destroy = layer => {layer.destroy()}\n        var make    = item  => {/* no initial value */}\n        var methods = {\n            on (topic, callback) {\n                if (topic == 'make') {\n                    make = item => {\n                        var layer  = callback(item)\n                        layer.data = item\n                        Object.defineProperty(item, 'layer', {\n                            value      : layer, \n                            enumerable : false\n                        })\n                    }\n                    model.forEach(make)\n                } else if (topic == 'destroy')\n                    destroy = callback\n                return model\n            },\n            push () {\n                make(arguments[0])\n                Array.prototype.push.apply(this, arguments)\n            },\n            splice () {\n                var deleted = Array.prototype.splice.apply(this, arguments)\n                deleted.forEach(a => destroy(a.layer))\n                return deleted\n            },\n            find      (query) {return arr.find(model, query)},\n            delete    (query) {return arr.delete(model, query)},\n            filterMap (query) {return arr.filterMap(model, query)},\n            reset     () {return model.splice(0, model.length)},\n        }\n        for (var key in methods)\n            Object.defineProperty(model, key,\n                {enumerable: false, value: methods[key]})\n        return model\n    },\n    \n    /*\n        var boxes = fw.model.put({\n            count : 10,\n            model : {\n                album  : fw.model.iterate(i => {return custom[i].album}),\n                id     : '{type: int, mode: forward, from: 1}',\n            },\n            shuffle : [{\n                someParam : 'testest'\n            },{\n                others : '{type: int, mode: random, min: 1, max: 10}',\n                image  : '{type: image, source: local}' \n            }]\n        })\n    */\n    \n    put (opt) {\n        // modify values\n        for (var key in opt.model) {\n            var value = opt.model[key]\n            // reset integer with count type\n            if (value.type == 'expression' && value.expressions)\n                value.expressions.forEach(expression => {\n                    // reset int expression if loop\n                    if (expression.method == 'int' && expression.mode == 'loop')\n                        expression.i = 0\n                })\n        }\n        // render content\n        var model = []\n        for (var i = 0; i < (opt.count || 1); i ++) {\n            // copy raw model\n            var property = this.render(opt.model)\n            // make shuffle on model\n            if ('shuffle' in opt) {\n                var index = math.randInt(0, opt.shuffle.length)\n                Object.assign(property, this.render(opt.shuffle[index]))\n            }\n            // add rendered version of model to the output list\n            model.push(property)\n        }\n        // make watchable\n        return this.init(model)\n    },\n    \n    render (model) {\n        var out = {}\n        for (var key in model) {\n            // init expression\n            if (val.isStr(model[key]) && model[key].match(/{.*?}/))\n                model[key] = this._parseExpressions(model[key])\n            // render value if expression\n            if (model[key].type == 'expression')\n                out[key] = model[key].render()\n            // transfer value\n            else\n                out[key] = model[key]\n        }\n        return out\n    },\n    \n    _parseExpressions (string) {\n        var out = {type: 'expression', expressions: []}\n        // find all the queries and replace them with functions\n        var string = string.replace(/{.*?}/g, match => {\n            var query = {}\n            // parse match\n            match.replace(/{| |}/g, '').split(',').forEach(p => {\n                p = p.split(':')\n                query[p[0]] = parseInt(p[1]) || p[1]\n            })\n            // find method of this and push generated expression\n            out.expressions.push(expressions[query.type](query))\n            // save index of array {1}\n            return `{${out.expressions.length - 1}}`\n        })\n        out.render = function () {\n            // replace all {1} with expression result\n            var result = string.replace(/{.*?}/g, i => {\n                // bundle.expressions[{1}]\n                return this.expressions[i.match(/\\d+/)[0]].render()\n            })\n            // convert to int if no characters\n            return result.match(/[^\\d+]/)? result: parseInt(result)\n        }\n        return out\n    },\n    \n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/model.js","\n\n\nimport {css, math} from './index'\n\nexport default {\n    \n    ellipsis (dom, lineCount, symbol) {\n        // set target height\n        dom.style.height = this.getLineHeight(dom) * lineCount +'px'\n        var domRect      = dom.getBoundingClientRect()\n        var multiColumn  = css.computed(dom, 'column-count') > 1\n        // check if iteration is necessary\n        if (multiColumn\n        &&  dom.scrollWidth  > domRect.width  + 1\n        ||  dom.scrollHeight > domRect.height + 1\n        ){\n            // init range selection\n            var string = dom.firstChild\n            var length = dom.innerHTML.length\n            var range  = document.createRange()\n            range.setEnd(string, length)\n            // search for position\n            math.binarySearch(length, function (i, end) {\n                // make selection\n                range.setStart(string, end? i - 3: i)\n                // return check\n                var cursorRect = range.getBoundingClientRect()\n                return (multiColumn?\n                    cursorRect.left < domRect.right :\n                    cursorRect.top  < domRect.bottom - 1\n                )\n            })\n            // delete rest and add ellipsis\n            range.deleteContents()\n            dom.innerHTML += symbol || '&hellip;'\n        }\n        // restore height\n        dom.style.height = null\n    },\n\n\tlineCount (dom) {\n\t\treturn Math.floor(\n\t\t\tdom.offsetHeight / \n\t\t\tthis.getLineHeight(dom)\n\t\t)\n\t},\n\n    getLineHeight (dom) {\n        var string = dom.firstChild\n        var range  = document.createRange()\n        range.setStart(string, 0)\n        range.setEnd  (string, 1)\n        return range.getBoundingClientRect().height\n    },\n\n\tcapitalize (string) {\n    \treturn string.charAt(0).toUpperCase() + string.slice(1)\n\t},\n\n\thash (string) {\n\t    var hash = 0\n\t    for (i = 0; i < string.length; i ++) \n\t    \thash += string.charCodeAt(i)\n\t    return hash\n\t},\n    \n    numberPadding (num, symbol, length) {\n        var num = num + ''\n        while (num.length < length) num = symbol + num\n        return num\n    },\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/text.js","\n\n\nexport default {\n    \n    exists (val) {\n        return typeof val !== 'undefined'\n    },\n    \n    isBool (val) {\n        return typeof val === \"boolean\"\n    },\n    \n    isNum (val) {\n        return typeof val === 'number'\n    },\n    \n    isStr (val) {\n        return typeof val === 'string' || val instanceof String\n    },\n    \n    isArr (val) {\n        return Array.isArray(val)\n    },\n    \n    isDom (val) {\n        return val instanceof Element\n    },\n    \n    isObj (val) {\n        return typeof val == 'object' && val.constructor == Object\n    },\n    \n    isFn (val) {\n        return typeof val === 'function'\n    },\n\t\n\tisVec (val) {\n\t\treturn val.position || val.opposite\n\t},\n\t\n\tisDim (val) {\n\t\treturn val.l || val.r\n\t},\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/value.js","\n\n\nimport {val, math} from './index'\n\nexport default class Vec {\n\n    constructor (x = 0, y = 0, z = 0) {\n        this.x = x\n        this.y = y\n        this.z = z\n    }\n\n    copy () {\n        return new Vec(this.x, this.y)\n    }\n\n    add (vec, set) {\n\t    if (set) {\n\t        this.x += (vec.x || 0)\n\t        this.y += (vec.y || 0)\n\t        this.z += (vec.z || 0)\n\t        return this\n        } else return new Vec(\n            this.x + (vec.x || 0),\n            this.y + (vec.y || 0),\n            this.z + (vec.z || 0)\n        )\n    }\n\n    sub (vec, set) {\n\t\tif (set) {   \n\t        this.x -= (vec.x || 0)\n\t        this.y -= (vec.y || 0)\n\t        this.z -= (vec.z || 0)\n\t        return this\n\t\t} else return new Vec(\n            this.x - (vec.x || 0),\n            this.y - (vec.y || 0),\n            this.z - (vec.z || 0)\n        )\n    }\n    \n    div (vec, set) {\n\t    if (set) {\n\t        this.x /= (vec.x || 1)\n\t        this.y /= (vec.y || 1)\n\t        this.z /= (vec.z || 1)\n\t        return this\n        } else return new Vec(\n            this.x / (vec.x || 1),\n            this.y / (vec.y || 1),\n            this.z / (vec.z || 1)\n        )\n    }\n    \n    mult (vec, set) {\n\t    if (set) {\n\t        this.x *= (vec.x || 1)\n\t        this.y *= (vec.y || 1)\n\t        this.z *= (vec.z || 1)\n\t        return this\n        } else return new Vec(\n            this.x * (vec.x || 1),\n            this.y * (vec.y || 1),\n            this.z * (vec.z || 1)\n        )\n    }\n\n    len () {\n        return Math.sqrt(\n            Math.pow(this.x || 0, 2) +\n            Math.pow(this.y || 0, 2) +\n            Math.pow(this.z || 0, 2)\n        )\n    }\n\n    scale (len, set) {\n\t    if (set) {\t\n\t\t\tthis.x *= len\n\t\t\tthis.y *= len\n\t\t\tthis.z *= len\n\t\t\treturn this\n\t\t} else return new Vec(\n            this.x * len,\n            this.y * len,\n            this.z * len\n        )\n    }\n\n    norm (set) {\n\t    if (set) {\n\t\t    var len = 1 / this.len()\n\t        this.x *= len\n\t        this.y *= len\n\t        this.z *= len\n\t        return this\n\t    } else {\n\t\t    var len = 1 / this.len()\n\t        return new Vec(\n\t            this.x * len,\n\t            this.y * len,\n\t            this.z * len\n\t        )\n        }\n    }\n \n    resize (len) {\n        var norm = this.getNorm()\n        return new Vec(\n            norm.x * len,\n            norm.y * len,\n            norm.z * len\n        )\n    }\n\n    to (vec, i) {\n    \treturn new Vec(\n\t    \ti * ((vec.x || 0) - this.x) + this.x,\n\t    \ti * ((vec.y || 0) - this.y) + this.y,\n\t    \ti * ((vec.z || 0) - this.z) + this.z\n    \t)\n    }\n    \n    rotate (angle, set) {\n        var rad = Math.PI / 180 * angle\n        var cos = Math.cos(rad)\n        var sin = Math.sin(rad)\n        var x   = (cos * this.x) + (sin * this.y)\n        var y   = (cos * this.y) - (sin * this.x)\n\t    if (set) {\n\t        this.x = x\n\t        this.y = y\n\t        return this\n\t    } else {\n\t        return new Vec(x, y)\n        }\n    }\n\n    angle2d () {\n\t    return Math.atan2(this.x, this.y) * 180 / Math.PI\n    }\n\n    unit (unit) {\n        var data = {}\n        if (val.exists(this.x)) data.x = this.x + unit\n        if (val.exists(this.y)) data.y = this.y + unit\n        if (val.exists(this.z)) data.z = this.z + unit\n    \treturn data\n    }\n    \n    ununit() {\n        if (val.exists(this.x)) this.x = parseFloat(this.x)\n        if (val.exists(this.y)) this.y = parseFloat(this.y)\n        if (val.exists(this.z)) this.z = parseFloat(this.z)\n    \treturn this\n    }\n    \n    reset () {\n        if (val.exists(this.x)) this.x = 0\n        if (val.exists(this.y)) this.y = 0\n        if (val.exists(this.z)) this.z = 0\n    \treturn this\n    }\n\n    log (name) {\n        var data = {x: this.x}\n        if (val.exists(this.y)) data.y = this.y\n        if (val.exists(this.z)) data.z = this.z\n        if (typeof name === 'undefined') \n            console.log(data)\n        else\n            console.log(name, data)\n    }\n    \n    set (params) {\n        for (var i in params)\n            this[i](params[i])\n    }\n    \n    apply (fn) {\n        return new Vec(\n            fn({dimension: 'x', value: this.x}),\n            fn({dimension: 'y', value: this.y}),\n            fn({dimension: 'z', value: this.z})\n        )\n    }\n    \n    fill (value) {\n        this.x = value\n        this.y = value\n        this.z = value\n        return this\n    }\n    \n    mix (list) {\n        var sum = new Vec()\n        var len = 1\n        if (val.isArr(list)) {\n            len = list.length\n            for (var i = 0; i < len; i ++) \n                sum.add(list[i], true)\n        } else if (val.isObj(list)) {\n            len = Object.keys(list).length\n            for (var v in list)\n                sum.add(list[v], true)\n        }\n        return sum.div(new Vec().fill(len))\n    }\n    \n\trange (rect, set) {\n        var range = val.exists(rect.length)? (\n                val.isNum(rect.length)? \n                {x: rect.length, y: rect.length}: \n                rect.length\n            ): {x: 100, y: 100}\n        rect.onLimit = rect.onLimit || {}\n        var vec = new Vec(\n\t\t\tmath.rubberRange(this.x, rect.l, rect.r, range.x, rect.onLimit.x),\n\t\t\tmath.rubberRange(this.y, rect.t, rect.b, range.y, rect.onLimit.y)\n\t\t)\n        if (set) {\n            this.x = vec.x\n            this.y = vec.y\n        } else return vec\n\t}\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/vector.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js?sourceMap!./style.sass\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js?sourceMap!./style.sass\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js?sourceMap!./style.sass\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/style.sass\n// module id = 19\n// module chunks = 0","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"* {\\n  margin: 0;\\n  box-sizing: border-box; }\\n\\nhtml {\\n  width: 100%;\\n  height: 100%; }\\n  html body {\\n    background-color: #1f2428;\\n    perspective: 500px;\\n    width: 100%;\\n    height: 100%; }\\n\\n.layer {\\n  font-family: 'arial';\\n  font-size: 13;\\n  transition: box-shadow .2s; }\\n  .layer.default {\\n    position: relative;\\n    display: inline-block;\\n    width: 100px;\\n    height: 100px;\\n    background-color: rgba(255, 255, 255, 0.7);\\n    background-size: cover;\\n    background-position: center; }\\n  .layer.drag {\\n    box-shadow: 0 0 100px 0 rgba(0, 0, 0, 0.5) !important; }\\n  .layer.resize {\\n    background: red; }\\n  .layer .edge {\\n    position: absolute;\\n    width: 12px;\\n    height: 12px;\\n    background: #00aaff;\\n    border-radius: 6px;\\n    margin-left: -6px;\\n    margin-top: -6px; }\\n    .layer .edge.lt, .layer .edge.l, .layer .edge.lb {\\n      left: 0%; }\\n    .layer .edge.t, .layer .edge.b {\\n      left: 50%; }\\n    .layer .edge.rt, .layer .edge.r, .layer .edge.rb {\\n      left: 100%; }\\n    .layer .edge.lt, .layer .edge.t, .layer .edge.rt {\\n      top: 0%; }\\n    .layer .edge.l, .layer .edge.r {\\n      top: 50%; }\\n    .layer .edge.lb, .layer .edge.b, .layer .edge.rb {\\n      top: 100%; }\\n    .layer .edge.l {\\n      cursor: w-resize; }\\n    .layer .edge.lt {\\n      cursor: nw-resize; }\\n    .layer .edge.t {\\n      cursor: n-resize; }\\n    .layer .edge.rt {\\n      cursor: ne-resize; }\\n    .layer .edge.r {\\n      cursor: e-resize; }\\n    .layer .edge.rb {\\n      cursor: se-resize; }\\n    .layer .edge.b {\\n      cursor: s-resize; }\\n    .layer .edge.lb {\\n      cursor: sw-resize; }\\n\\n.scroller {\\n  width: 100%;\\n  height: 100%;\\n  -webkit-scroll-snap-type: mandatory;\\n  -webkit-scroll-snap-destination: 50% 50%; }\\n  .scroller > .layer {\\n    width: 100%;\\n    height: 100%;\\n    -webkit-scroll-snap-coordinate: 50% 50%; }\\n  .scroller.x {\\n    overflow-y: hidden;\\n    white-space: nowrap; }\\n    .scroller.x > .layer {\\n      display: inline-block;\\n      white-space: normal; }\\n  .scroller.y {\\n    overflow-x: hidden; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader?sourceMap!./src/style.sass\n// module id = 20\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader/lib/css-base.js\n// module id = 21\n// module chunks = 0","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/style-loader/addStyles.js\n// module id = 22\n// module chunks = 0"],"sourceRoot":""}